#!/bin/sh
min=""
max=""

tempfile=`mktemp`
for FILE in $* ; do

job=`sed   -n '2 s/\Subject: Job \([0-9][0-9]*\):.*/\1/ p' $FILE`
bhist -l $job > $tempfile
start=`sed   -n 's/\(.*\): Submitted from .*$/\1/ p' $tempfile`
echo $start
start=`date -d "$start"  +"%s"`

if [ -n "$min" ]; then
    if [ $start -lt $min ]; then
	min=$start
    fi
else
    min=$start
fi

end=`sed   -n 's/\(.*\): Done .*$/\1/ p'  $tempfile`
echo $end
end=`date -d "$end"  +"%s"`

if [ -n "$max" ]; then
    if [ $end  -gt $max ]; then
	max=$end
    fi
else
    max=$end
fi

done

runtime=`expr $max - $min`
echo `date -d @$min`
echo `date -d @$max`
echo "$runtime seconds"
